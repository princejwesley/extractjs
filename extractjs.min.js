/*!The MIT License (MIT)

Copyright (c) 2015 Prince John Wesley (princejohnwesley@gmail.com)
**/
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["exports"],b):"undefined"!=typeof exports?module.exports=b():a.extractjs=b()}(this,function(a){"use strict";function b(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function c(a,b){a.startExtract=b.startExtract&&b.startExtract.length?b.startExtract:f.startExtract,a.endExtract=b.endExtract&&b.endExtract.length?b.endExtract:f.endExtract,a.initValue=b.initValue}function d(a){var b,c={};for(b in a)c[b]=a[b];return c}function e(a){return function(e,f,g){function h(a){var c,d,f=e,g=b(n.endExtract),h=b(n.startExtract);for(c in a)m.hasOwnProperty(c)&&(d=new RegExp(h+"\\s*"+b(c)+"\\s*"+g),f=f.replace(d,a[c]));for(c in m)d=new RegExp(h+b(c)+g),f=f.replace(d,n.initValue);return f}function i(a){d(m);if("string"!=typeof a)return m;if(j=a.match(p)){j.shift();for(k in o)l=j[k],m[o[k]]=+l?+l:l}return m}if("string"!=typeof e)throw"Expected string template, Found "+typeof e;var j,k,l,m={},n={},o=[],p="",q=0;c(n,g||a);var r=new RegExp(b(n.startExtract)+"(.*?)"+b(n.endExtract),"g");return e.replace(r,function(a,c,d,e){return c=c.trim(),""!==c&&(m[c]=n.initValue,o.push(c)),p+=b(e.substring(q,d)),q=d+a.length,""===c?"":(p+="(.*?)",d+a.length!==e.length?"":(p+="$",""))}),q<e.length&&(p+=b(e.substring(q))),"string"!=typeof f?{extract:i,bind:h,interpolate:h}:i(f)}}var f={startExtract:"{",endExtract:"}",initValue:a};return function(a){var b={};return a?c(b,a):b=f,e(b)}});