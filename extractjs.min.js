/*!The MIT License (MIT)

Copyright (c) 2015 Prince John Wesley (princejohnwesley@gmail.com)
**/
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["exports"],b):"undefined"!=typeof exports?module.exports=b():a.extractjs=b()}(this,function(a){"use strict";function b(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function c(a,b){a.startExtract=b.startExtract&&b.startExtract.length?b.startExtract:f.startExtract,a.endExtract=b.endExtract&&b.endExtract.length?b.endExtract:f.endExtract,a.initValue=b.initValue,a.extractors=b.extractors?b.extractors:f.extractors}function d(a){var b,c={};for(b in a)c[b]=a[b];return c}function e(a){return function(e,f,g){function h(a){return+a&&parseInt(a)?+a:a}function i(a,b,c){var d=a.extractors[b]||h;return"function"!=typeof d?c:d(c)}function j(a){var c,d,f=e,g=b(o.endExtract),h=b(o.startExtract);for(c in a)n.hasOwnProperty(c)&&(d=new RegExp(h+"\\s*"+b(c)+"\\s*"+g,"g"),f=f.replace(d,a[c]));for(c in n)d=new RegExp(h+b(c)+g,"g"),f=f.replace(d,o.initValue);return f}function k(a){var b=d(n);if("string"!=typeof a)return b;if(l=a.match(q)){l.shift();for(m in p)b[p[m]]=i(o,p[m],l[m])}return b}if("string"!=typeof e)throw"Expected string template, Found "+typeof e;var l,m,n={},o={},p=[],q="",r=0;c(o,g||a);var s=new RegExp(b(o.startExtract)+"(.*?)"+b(o.endExtract),"g");return e.replace(s,function(a,c,d,e){return c=c.trim(),""!==c&&(n[c]=o.initValue,p.push(c)),q+=b(e.substring(r,d)),r=d+a.length,""===c?"":(q+="([\\s\\S]*?)",d+a.length!==e.length?"":(q+="$",""))}),r<e.length&&(q+=b(e.substring(r))),"string"!=typeof f?{extract:k,bind:j,interpolate:j}:(q=new RegExp(q),k(f))}}var f={startExtract:"{",endExtract:"}",initValue:a,extractors:{}};return function(a){var b={};return a?c(b,a):b=f,e(b)}});